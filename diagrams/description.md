# Система управления ссылками: описание архитектуры

## Зачем это нужно?

Система предназначена для управления коллекцией ссылок через простой и понятный интерфейс администратора и расширение для браузера. Это может быть полезно для различных сценариев использования: управление закладками компании, каталог полезных ресурсов, система сокращения ссылок и т.д.

## Как это работает?

Система построена на принципах микросервисной архитектуры с чётким разделением ответственности:

1. **Elixir Phoenix** — отвечает за бизнес-логику, API и админ-интерфейс с использованием Phoenix LiveView и Backpex. Elixir выбран из-за устойчивости к сбоям, высокой производительности и конкурентности, что делает его идеальным для построения надежных веб-приложений.

2. **Chrome Extension** — расширение для браузера, написанное на TypeScript, которое позволяет пользователям быстро создавать и управлять ссылками прямо из браузера. Поддерживает как авторизацию через Keycloak, так и гостевой режим работы.

3. **Keycloak** — решает задачи аутентификации и авторизации. Вместо разработки собственной системы безопасности мы используем проверенное решение, которое поддерживает OAuth 2.0, OIDC и другие современные протоколы. Система также поддерживает гостевой режим работы без Keycloak.

4. **База данных** — система поддерживает два варианта хранения данных:
   - **Apache Cassandra** — для production-окружения, обеспечивает масштабируемое хранение данных с использованием single table design
   - **SQLite** — для локальной разработки, позволяет работать без внешних зависимостей и упрощает настройку окружения

5. **ELK Stack** — для централизованного сбора логов, мониторинга и анализа: Elasticsearch для хранения и поиска по логам, Logstash для сбора и обработки, Kibana для визуализации.

## Почему именно такая архитектура?

1. **Единая платформа**: Elixir/Phoenix используется как для API, так и для админ-интерфейса, что упрощает разработку и поддержку.

2. **Гибкость в разработке**: поддержка SQLite для локальной разработки позволяет разработчикам быстро начать работу без необходимости настройки сложной инфраструктуры (Cassandra, Keycloak, ELK Stack), что значительно ускоряет цикл разработки.

3. **Масштабируемость**: каждый компонент может быть независимо масштабирован при увеличении нагрузки. В production используется Cassandra для горизонтального масштабирования, а для разработки достаточно легковесного SQLite.

4. **Удобство использования**: расширение для браузера обеспечивает быстрый доступ к функциям системы прямо из браузера, что повышает удобство использования и продуктивность пользователей.

5. **Технологический стек**: Phoenix LiveView обеспечивает реактивный пользовательский интерфейс без сложностей SPA, Backpex предоставляет готовые компоненты для админки, Elixir показывает отличную производительность для API, Keycloak предоставляет готовое решение для безопасности (с возможностью работы в гостевом режиме), а Cassandra обеспечивает масштабируемое хранение данных в production.

6. **Распределенное логирование**: ELK Stack обеспечивает централизованный сбор и анализ логов, что критически важно для мониторинга и отладки распределенной системы.

7. **Контейнеризация**: использование Docker делает развертывание и управление всеми компонентами простым и единообразным, независимо от того, где будет размещена система.

Это решение обеспечивает баланс между простотой разработки, производительностью и масштабируемостью, что делает его подходящим для системы управления ссылками как небольшого, так и крупного масштаба.
